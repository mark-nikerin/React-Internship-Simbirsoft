(this["webpackJsonpneed-for-drive-app"]=this["webpackJsonpneed-for-drive-app"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/icons.bb1e911f.svg"},,,,,,,,function(e,t,a){},,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/1.0f70766b.png"},function(e,t,a){e.exports=a.p+"static/media/2.f506d8de.png"},function(e,t,a){e.exports=a.p+"static/media/3.e749d54b.png"},function(e,t,a){e.exports=a.p+"static/media/4.9e412414.png"},function(e,t,a){e.exports=a.p+"static/media/map.b9950c47.png"},,,function(e,t,a){e.exports=a(70)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,function(e,t,a){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),i=a.n(c),l=(a(43),a(44),a(16)),s=a(4),o=a(7),u=(a(45),function(e){var t=e.openMenu,a=e.isMenuOpen;return r.a.createElement("button",{className:a?"hamburger_is-open":"hamburger",onClick:function(e){return function(e){e.preventDefault(),t(!a)}(e)}},r.a.createElement("div",{className:"hamburger__box"},r.a.createElement("div",{className:"hamburger__inner"})))}),m=(a(46),function(){var e=Object(n.useState)("Eng"),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"languageSelector",onClick:function(e){!function(e){e.preventDefault(),c("Eng"===a?"\u0420\u0443\u0441":"Eng")}(e)}},r.a.createElement("span",{className:"unselectable"},a))}),d=(a(47),a(13)),p=a.n(d),f=function(e){var t=e.isMenuOpen,a=e.openMenu;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t?"menu":"menu_hidden"},r.a.createElement("li",{className:"menu__list"},r.a.createElement("ul",null,"\u041f\u0410\u0420\u041a\u041e\u0412\u041a\u0410"),r.a.createElement("ul",null,"\u0421\u0422\u0420\u0410\u0425\u041e\u0412\u041a\u0410"),r.a.createElement("ul",null,"\u0411\u0415\u041d\u0417\u0418\u041d"),r.a.createElement("ul",null,"\u041e\u0411\u0421\u041b\u0423\u0416\u0418\u0412\u0410\u041d\u0418\u0415")),r.a.createElement("div",{className:"menu__social-icons"},r.a.createElement("svg",{className:"menu__social-icon",width:"32",height:"32"},r.a.createElement("use",{xlinkHref:"".concat(p.a,"#telegram")})),r.a.createElement("svg",{className:"menu__social-icon",width:"32",height:"32"},r.a.createElement("use",{xlinkHref:"".concat(p.a,"#facebook")})),r.a.createElement("svg",{className:"menu__social-icon",width:"32",height:"32"},r.a.createElement("use",{xlinkHref:"".concat(p.a,"#instagram")})))),r.a.createElement("div",{className:t?"transparent-menu":"transparent-menu_hidden",onClick:function(e){return function(e){e.preventDefault(),a(!t)}(e)}}))},E=(a(48),function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],i=function(e){c(e)};return r.a.createElement("div",{className:"sidebar"},r.a.createElement(u,{isMenuOpen:a,openMenu:i}),r.a.createElement(f,{isMenuOpen:a,openMenu:i}),r.a.createElement(m,null))}),v=a(73),h=a(72),b=(a(49),a(31)),y=a.n(b),I=a(32),O=a.n(I),N=a(33),g=a.n(N),_=a(34),S=a.n(_),k=[{image:y.a,title:"\u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u0430\u044f \u043f\u0430\u0440\u043a\u043e\u0432\u043a\u0430",text:"\u041e\u0441\u0442\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043c\u0430\u0448\u0438\u043d\u0443 \u043d\u0430 \u043f\u043b\u0430\u0442\u043d\u044b\u0445 \u0433\u043e\u0440\u043e\u0434\u0441\u043a\u0438\u0445 \u043f\u0430\u0440\u043a\u043e\u0432\u043a\u0430\u0445 \u0438 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043d\u044b\u0445 \u043c\u0435\u0441\u0442\u0430\u0445, \u043d\u0435 \u043d\u0430\u0440\u0443\u0448\u0430\u044f \u041f\u0414\u0414, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0432 \u0430\u044d\u0440\u043e\u043f\u043e\u0440\u0442\u0430\u0445."},{image:O.a,title:"\u0421\u0442\u0440\u0430\u0445\u043e\u0432\u043a\u0430",text:"\u041f\u043e\u043b\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u0445\u043e\u0432\u043a\u0430 \u0441\u0442\u0440\u0430\u0445\u043e\u0432\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f."},{image:g.a,title:"\u0411\u0435\u043d\u0437\u0438\u043d",text:"\u041f\u043e\u043b\u043d\u044b\u0439 \u0431\u0430\u043a \u043d\u0430 \u043b\u044e\u0431\u043e\u0439 \u0437\u0430\u043f\u0440\u0430\u0432\u043a\u0435 \u0433\u043e\u0440\u043e\u0434\u0430 \u0437\u0430 \u043d\u0430\u0448 \u0441\u0447\u0451\u0442."},{image:S.a,title:"\u041e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435",text:"\u0410\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442 \u0435\u0436\u0435\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u043e\u0435 \u0422\u041e."}],j=function(){var e=Object(n.useState)(0),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(k[a]),l=Object(o.a)(i,2),s=l[0],u=l[1];return r.a.createElement("div",{className:"slider"},r.a.createElement(v.a,null,r.a.createElement(h.a,{classNames:"slide-animation",timeout:{enter:600,exit:600},key:a},r.a.createElement("div",{className:"slide",style:{backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, #000000 100%), url(".concat(s.image,")")}},r.a.createElement("button",{className:"slide__arrow",onClick:function(e){return function(e){e.preventDefault();var t=a-1<0?k.length-1:a-1;u(k[t]),c(t)}(e)}},r.a.createElement("svg",{className:"slide__arrow-icon",width:"10",height:"20"},r.a.createElement("use",{xlinkHref:"".concat(p.a,"#arrow-left")}))),r.a.createElement("div",{className:"slide__content"},r.a.createElement("div",{className:"slide__content_item"},r.a.createElement("h1",null,s.title),r.a.createElement("h3",null,s.text),r.a.createElement("button",{className:"slide__button-".concat(a)},r.a.createElement("span",null,"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"))),r.a.createElement("div",{className:"slide__dots"},k.map((function(e,t){return t===a?r.a.createElement("div",{className:"slide__dot_active",key:t}):r.a.createElement("div",{className:"slide__dot",key:t,onClick:function(e){!function(e,t){e.preventDefault(),u(k[t]),c(t)}(e,t)}})})))),r.a.createElement("button",{className:"slide__arrow",onClick:function(e){return function(e){e.preventDefault();var t=a+1>k.length-1?0:a+1;u(k[t]),c(t)}(e)}},r.a.createElement("svg",{className:"slide__arrow-icon",width:"10",height:"20"},r.a.createElement("use",{xlinkHref:"".concat(p.a,"#arrow-right")})))))))},x=(a(52),function(){return r.a.createElement("div",{className:"header"},r.a.createElement(l.b,{to:"/"}," Need for drive "),r.a.createElement("div",{className:"location"},r.a.createElement("svg",{className:"location__icon",width:"18",height:"20"},r.a.createElement("use",{xlinkHref:"".concat(p.a,"#location")})),r.a.createElement("span",null,"\u0423\u043b\u044c\u044f\u043d\u043e\u0432\u0441\u043a")))}),F=(a(55),function(){return r.a.createElement("div",{className:"main"},r.a.createElement(x,null),r.a.createElement("div",{className:"main__content"},r.a.createElement("h1",{className:"unselectable"},"\u041a\u0430\u0440\u0448\u0435\u0440\u0438\u043d\u0433"),r.a.createElement("h2",{className:"unselectable"},"Need for drive"),r.a.createElement("h3",{className:"unselectable"},"\u041f\u043e\u043c\u0438\u043d\u0443\u0442\u043d\u0430\u044f \u0430\u0440\u0435\u043d\u0434\u0430 \u0430\u0432\u0442\u043e \u0442\u0432\u043e\u0435\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430"),r.a.createElement(l.b,{to:"/order"},r.a.createElement("button",{className:"button"},r.a.createElement("span",null,"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))),r.a.createElement("div",{className:"main__footer"},r.a.createElement("span",null,"\xa9 2016-2019 \xabNeed for drive\xbb"),r.a.createElement("a",{href:"tel:84952342244"},"8 (495) 234-22-44")))}),w=(a(56),function(){return r.a.createElement("div",{className:"start-page"},r.a.createElement(F,null),r.a.createElement(j,null))}),D=(a(57),["\u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435","\u041c\u043e\u0434\u0435\u043b\u044c","\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e","\u0418\u0442\u043e\u0433\u043e"]),C=function(e){return r.a.createElement(r.a.Fragment,null,6===e.currentStep?r.a.createElement("span",{className:"menu-order-number"},"\u0417\u0430\u043a\u0430\u0437 \u043d\u043e\u043c\u0435\u0440 ",e.orderId):r.a.createElement("ul",{className:"steps-menu"},D.map((function(t,a){return a===e.currentStep-1?r.a.createElement("li",{className:"current",key:a},t):-1!==e.filledSteps.indexOf(a)||a<e.currentStep?r.a.createElement("li",{className:"active",key:a,onClick:function(t){return function(t,a){t.preventDefault(),e.setStep(a)}(t,a+1)}},t):r.a.createElement("li",{key:a},t)}))))},P=(a(58),["\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c","\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e","\u0418\u0442\u043e\u0433\u043e","\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c","\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c","\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"]),T=function(e){return r.a.createElement("div",{className:"order-info"},r.a.createElement("h1",null,"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437:"),r.a.createElement("ul",{className:"info"},e.infoItems.map((function(e,t){return r.a.createElement("li",{className:"info__item",key:t},r.a.createElement("h4",null,e.title),r.a.createElement("div",{className:"dots"}),r.a.createElement("span",null,e.value))}))),r.a.createElement("div",{className:"price",style:{display:null===e.orderPrice.min&&null===e.orderPrice.final?"none":"flex"}},r.a.createElement("h3",null,"\u0426\u0435\u043d\u0430:"),r.a.createElement("span",null,e.currentStep<3?"\u041e\u0442 "+e.orderPrice.min+" \u0434\u043e "+e.orderPrice.max+" \u20bd":e.orderPrice.final+" \u20bd")),r.a.createElement("button",{className:6===e.currentStep?"button red":-1===e.filledSteps.indexOf(e.currentStep)?"button inactive":"button",onClick:function(t){return function(t){t.preventDefault(),-1!==e.filledSteps.indexOf(e.currentStep)&&(window.scrollTo(0,0),6===e.currentStep?(e.setStep(1),e.resetFields(),e.resetInfoItems()):e.setNextStep())}(t)}},r.a.createElement("span",null,P[e.currentStep-1])))},M=a(3),V=a.n(M),A=a(8),Y=function(e){var t=r.a.useState(!1),a=Object(o.a)(t,2),n=a[0],c=a[1],i=r.a.useState(e.value),l=Object(o.a)(i,2),s=l[0],u=l[1],m=r.a.useState([]),d=Object(o.a)(m,2),p=d[0],f=d[1],E=function(t){u(t.name),e.onValueChange(t)},v=function(){var t=Object(A.a)(V.a.mark((function t(){var a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onFetchSuggestions();case 2:a=t.sent,f(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"autocomplete",key:1},r.a.createElement("input",{type:"search",placeholder:e.placeholder,onFocus:function(e){e.preventDefault(),v(),c(!0)},onChange:function(e){e.preventDefault(),c(!0),E({id:null,name:e.target.value})},value:s}),r.a.createElement("div",{className:n&&s.length>=1?"autocomplete_items":"autocomplete_items-hidden",key:2},p&&0===p.length&&r.a.createElement("span",{onClick:function(e){e.preventDefault(),c(!1)}},"\u041d\u0435\u0442 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432"),p&&p.map((function(t,a){return t.name.toUpperCase().includes(s.toUpperCase())?r.a.createElement("span",{key:a,onClick:function(a){a.preventDefault(),E(t),e.onInputBlur(t.name),c(!1)}},t.name):r.a.createElement("span",{style:{display:"none"},key:a})})))))},R=a(35),H=a.n(R),U=(a(60),a(21),a(61),{city:"",point:""}),X={title:"\u041f\u0443\u043d\u043a\u0442 \u0432\u044b\u0434\u0430\u0447\u0438",value:""},B="5e25c641099b810b946c5d5b",L="https://cors-anywhere.herokuapp.com/",W=function(e){var t=e.props,a=function(){var e=Object(A.a)(V.a.mark((function e(){var t,a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(L+"http://api-factory.simbirsoft1.com/api/db/city",{headers:{"Content-Type":"application/json","X-Api-Factory-Application-Id":B}});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,n=a.data.map((function(e){return{id:e.id,name:e.name}})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(A.a)(V.a.mark((function e(){var t,a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(L+"http://api-factory.simbirsoft1.com/api/db/point",{headers:{"Content-Type":"application/json","X-Api-Factory-Application-Id":B}});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,n=a.data.filter((function(e){return e.cityId.name===c})).map((function(e){return{id:e.id,name:e.name+", "+e.address}})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=t.fieldValues.city.name,i=t.fieldValues.point.name;return r.a.createElement("div",{className:"step"},r.a.createElement("div",{className:"search"},r.a.createElement("div",{className:"search__item"},r.a.createElement("h3",null,"\u0413\u043e\u0440\u043e\u0434"),r.a.createElement(Y,{onValueChange:function(e){t.setField("city",{id:e.id,name:e.name})},onInputBlur:function(e){""===e?t.removeInfoItem(X.title):U.city=e},value:c,placeholder:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u0433\u043e\u0440\u043e\u0434 ...",onFetchSuggestions:a})),r.a.createElement("div",{className:"search__item"},r.a.createElement("h3",null,"\u041f\u0443\u043d\u043a\u0442 \u0432\u044b\u0434\u0430\u0447\u0438"),r.a.createElement(Y,{onValueChange:function(e){t.setField("point",{id:e.id,name:e.name})},onInputBlur:function(e){if(""===e)t.removeInfoItem(X.title);else{U.point=e;var a=U.city+",   "+U.point;X.value!==a&&(X.value=a,t.addInfoItem(X.title,X.value))}},value:i,placeholder:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u043f\u0443\u043d\u043a\u0442 ...",onFetchSuggestions:n}))),r.a.createElement("h3",{className:"map-title"},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043d\u0430 \u043a\u0430\u0440\u0442\u0435:"),r.a.createElement("img",{className:"map",src:"".concat(H.a),alt:"\u041a\u0430\u0440\u0442\u0430"}))},J=a(10),$=(a(62),{categories:null,cars:null}),q=function(e){var t=e.props,a=t.fieldValues.modelFilter,c=t.fieldValues.selectedCar.id,i=Object(n.useState)(),l=Object(o.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)(),d=Object(o.a)(m,2),p=d[0],f=d[1],E=function(e,a){e.preventDefault(),t.setField("modelFilter",a)},v=function(){var e=Object(A.a)(V.a.mark((function e(){var t,a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cors-anywhere.herokuapp.com/http://api-factory.simbirsoft1.com/api/db/category",{headers:{"Content-Type":"application/json","X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b"}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=["\u0412\u0441\u0435 \u043c\u043e\u0434\u0435\u043b\u0438"].concat(Object(J.a)(a.data.map((function(e){return e.name})))),u(n),$.categories=n;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(A.a)(V.a.mark((function e(){var t,a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cors-anywhere.herokuapp.com/http://api-factory.simbirsoft1.com/api/db/car",{headers:{"Content-Type":"application/json","X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b"}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.data.map((function(e){return{id:e.id,name:e.name,imgUrl:"https://cors-anywhere.herokuapp.com/http://api-factory.simbirsoft1.com"+e.thumbnail.path,priceMin:e.priceMin,priceMax:e.priceMax,number:e.number,tank:e.tank,colors:e.colors.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})),category:e.categoryId.name}})),f(n),$.cars=n;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){null===$.categories?v():u($.categories),null===$.cars?h():f($.cars)}),[]),r.a.createElement("div",{className:"step"},r.a.createElement("div",{className:"filters"},s&&s.map((function(e,t){return t===a?r.a.createElement("label",{className:"checked",key:t,onClick:function(e){return E(e,t)}},r.a.createElement("input",{type:"radio",defaultChecked:!0}),e):r.a.createElement("label",{key:t,onClick:function(e){return E(e,t)}},r.a.createElement("input",{type:"radio"}),e)}))),r.a.createElement("div",{className:"cars"},p&&s&&p.map((function(e,n){return r.a.createElement("div",{className:e.id===c?"cars__item selected":"cars__item",style:{display:0===a||s[a]===e.category?"flex":"none"},key:n,onClick:function(a){return function(e,a,n,r){e.preventDefault(),t.setField("selectedCar",a),t.addInfoItem("\u041c\u043e\u0434\u0435\u043b\u044c",a.model),t.setOrderPrice({min:n,max:r,final:n})}(a,{id:e.id,model:e.name,number:e.number,colors:e.colors,imgUrl:e.imgUrl,tank:e.tank},e.priceMin,e.priceMax)}},r.a.createElement("div",{className:"title"},r.a.createElement("h3",null,e.name),r.a.createElement("span",null,e.priceMin+" - "+e.priceMax+" \u20bd")),r.a.createElement("img",{crossOrigin:"anonymous",referrerPolicy:"origin",src:e.imgUrl,alt:e.name}))}))))},z=a(1),G=(a(63),a(14)),K=a.n(G),Q={rates:null},Z=function(e){var t=e.props,a=["\u041b\u044e\u0431\u043e\u0439"].concat(Object(J.a)(t.fieldValues.selectedCar.colors)),c=t.fieldValues.colorFilter.id,i=t.fieldValues.rate.id,l=t.fieldValues.additionals,s=t.fieldValues.dateStart.formatted,u=t.fieldValues.dateEnd.formatted,m=t.orderPrice,d=Object(n.useState)(),p=Object(o.a)(d,2),f=p[0],E=p[1],v=function(){var e=Object(A.a)(V.a.mark((function e(){var a,n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cors-anywhere.herokuapp.com/http://api-factory.simbirsoft1.com/api/db/rate",{headers:{"Content-Type":"application/json","X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b"}});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,r=n.data.map((function(e){return{id:e.id,price:e.price,unit:e.rateTypeId.unit,name:e.rateTypeId.name}})),t.setField("rate",{id:0,rateId:r[0].id}),t.addInfoItem("\u0422\u0430\u0440\u0438\u0444",r[0].name),E(r),Q.rates=r;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){null===Q.rates?v():E(Q.rates)}),[]);var h=function(e,n){e.preventDefault(),t.setField("colorFilter",{id:n,name:a[n]}),t.addInfoItem("\u0426\u0432\u0435\u0442",a[n])},b=function(){var e=Object(A.a)(V.a.mark((function e(a,n){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t.setField("rate",{id:n,rateId:f[n].id}),t.addInfoItem("\u0422\u0430\u0440\u0438\u0444",f[n].name),r=t.getOrderPrice(f[n].unit,f[n].price,t.getDateDiff(s,u),m.min,l),t.setOrderPrice(Object(z.a)(Object(z.a)({},m),{},{final:r}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),y=function(e,a){e.preventDefault();var n=Object(J.a)(l);n[a].isActive=!n[a].isActive,n[a].isActive?(t.addInfoItem(l[a].title,"\u0414\u0430"),t.setOrderPrice(Object(z.a)(Object(z.a)({},m),{},{final:m.final+l[a].price}))):(t.removeInfoItem(l[a].title),t.setOrderPrice(Object(z.a)(Object(z.a)({},m),{},{final:m.final-l[a].price}))),t.setField("additionals",n)},I=function(e,a){if(null!==e&&t.setField("dateStart",{formatted:e,timespan:new Date(e).valueOf()}),null!==a&&t.setField("dateEnd",{formatted:a,timespan:new Date(a).valueOf()}),null!==e&&null!==a){var n=t.getDateDiff(e,a),r=0===n.days?"":n.days+"\u0434 ",c=0===n.hours?"":n.hours+"\u0447 ",s=0===n.minutes?"":n.minutes+"\u043c ",o=t.getOrderPrice(f[i].unit,f[i].price,n,m.min,l);t.setOrderPrice(Object(z.a)(Object(z.a)({},m),{},{final:o})),t.addInfoItem("\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0430\u0440\u0435\u043d\u0434\u044b",r+c+s)}};return r.a.createElement("div",{className:"step"},r.a.createElement("h3",{className:"step__title"},"\u0426\u0432\u0435\u0442"),r.a.createElement("div",{className:"filters"},a.map((function(e,t){return t===c?r.a.createElement("label",{className:"checked",key:t,onClick:function(e){return h(e,t)}},r.a.createElement("input",{type:"radio",defaultChecked:!0}),e):r.a.createElement("label",{key:t,onClick:function(e){return h(e,t)}},r.a.createElement("input",{type:"radio"}),e)}))),r.a.createElement("h3",{className:"step__title"},"\u0414\u0430\u0442\u0430 \u0430\u0440\u0435\u043d\u0434\u044b"),r.a.createElement("div",{className:"search"},r.a.createElement("div",{className:"search__item"},r.a.createElement("h3",null,"C"),r.a.createElement("input",{type:null==s?"text":"datetime-local",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0438 \u0432\u0440\u0435\u043c\u044f",min:K()(new Date).format("YYYY-MM-DDTHH:mm"),defaultValue:null==s?null:K()(new Date(s)).format("YYYY-MM-DDTHH:mm"),onFocus:function(e){e.preventDefault(),e.target.type="datetime-local",e.target.max=u},onBlur:function(e){e.preventDefault(),e.target.type="datetime-local";var t=K()(e.target.value).format("YYYY-MM-DDTHH:mm");I(t,u)}})),r.a.createElement("div",{className:"search__item"},r.a.createElement("h3",null,"\u041f\u043e"),r.a.createElement("input",{type:null==u?"text":"datetime-local",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0438 \u0432\u0440\u0435\u043c\u044f",defaultValue:null==u?null:K()(new Date(u)).format("YYYY-MM-DDTHH:mm"),onFocus:function(e){e.preventDefault(),e.target.type="datetime-local",e.target.min=s},onBlur:function(e){e.preventDefault(),e.target.type="datetime-local";var t=K()(e.target.value).format("YYYY-MM-DDTHH:mm");I(s,t)}}))),r.a.createElement("h3",{className:"step__title"},"\u0422\u0430\u0440\u0438\u0444"),r.a.createElement("div",{className:"filters vertical"},f&&f.map((function(e,t){return t===i?r.a.createElement("label",{className:"checked",key:t,onClick:function(e){b(e,t)}},r.a.createElement("input",{type:"radio",defaultChecked:!0}),e.name+", "+e.price+"\u20bd/"+e.unit):r.a.createElement("label",{key:t,onClick:function(e){b(e,t)}},r.a.createElement("input",{type:"radio"}),e.name+", "+e.price+"\u20bd/"+e.unit)}))),r.a.createElement("h3",{className:"step__title"},"\u0414\u043e\u043f. \u0443\u0441\u043b\u0443\u0433\u0438"),r.a.createElement("div",{className:"filters vertical"},l.map((function(e,t){return!0===e.isActive?r.a.createElement("label",{className:"checked",key:t,onClick:function(e){return y(e,t)}},r.a.createElement("input",{type:"checkbox",defaultChecked:!0}),e.title+", "+e.price+e.unit):r.a.createElement("label",{key:t,onClick:function(e){return y(e,t)}},r.a.createElement("input",{type:"checkbox"}),e.title+", "+e.price+e.unit)}))))},ee=(a(65),function(e){var t=e.props,a=e.orderId,c=t.fieldValues.selectedCar,i=t.fieldValues.additionals,l=t.setField,s=t.addInfoItem,o=function(e){var a=e.cityId;l("city",{id:a.id,name:a.name});var n=e.pointId;l("point",{id:n.id,name:n.name+" "+n.address}),s("\u041f\u0443\u043d\u043a\u0442 \u0432\u044b\u0434\u0430\u0447\u0438",a.name+", "+n.address);var r=e.carId;l("selectedCar",{id:r.id,colors:r.colors,model:r.name,number:r.number,imgUrl:"https://cors-anywhere.herokuapp.com/http://api-factory.simbirsoft1.com"+r.thumbnail.path,tank:r.tank}),s("\u041c\u043e\u0434\u0435\u043b\u044c",r.name),l("colorFilter",{id:null,name:e.color}),s("\u0426\u0432\u0435\u0442",e.color),l("dateStart",{formatted:new Date(e.dateFrom).toLocaleString(),timespan:e.dateFrom}),l("dateEnd",{formatted:new Date(e.dateTo).toLocaleString(),timespan:e.dateTo});var c=t.getDateDiff(new Date(e.dateFrom),new Date(e.dateTo)),o=0===c.days?"":c.days+"\u0434 ",u=0===c.hours?"":c.hours+"\u0447 ",m=0===c.minutes?"":c.minutes+"\u043c ";t.addInfoItem("\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0430\u0440\u0435\u043d\u0434\u044b",o+u+m);var d=e.rateId;l("rate",{rateId:d.id,price:d.price,rateName:d.rateTypeId.name}),s("\u0422\u0430\u0440\u0438\u0444",d.rateTypeId.name),i[0].isActive=e.isFullTank,i[1].isActive=e.isNeedChildChair,i[2].isActive=e.isRightWheel,l("additionals",i),i.forEach((function(e){e.isActive&&s(e.title,"\u0414\u0430")}));var p=t.getOrderPrice(d.rateTypeId.unit,d.price,c,r.priceMin,i);console.log(p),t.setOrderPrice(Object(z.a)(Object(z.a)({},t.orderPrice),{},{final:p}))},u=function(){var e=Object(A.a)(V.a.mark((function e(t){var a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cors-anywhere.herokuapp.com/http://api-factory.simbirsoft1.com/api/db/order/"+t,{headers:{"Content-Type":"application/json","X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b"}});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,console.log(n),o(n.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){console.log(a),void 0!==a&&u(a)}),[]),r.a.createElement("div",{className:"step"},r.a.createElement("div",{className:"selected-car"},r.a.createElement("div",{className:"selected-car__info"},r.a.createElement("h1",{className:"info__title"},c.model),r.a.createElement("div",{className:"info__number"},c.number),r.a.createElement("div",{className:"info__item"},r.a.createElement("h3",null,"\u0422\u043e\u043f\u043b\u0438\u0432\u043e"),r.a.createElement("span",null,c.tank+" %")),r.a.createElement("div",{className:"info__item"},r.a.createElement("h3",null,"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0441"),r.a.createElement("span",null,t.fieldValues.dateStart.formatted))),r.a.createElement("img",{className:"selected-car__image",crossOrigin:"anonymous",referrerPolicy:"origin",src:c.imgUrl,alt:"car"})))}),te=(a(66),function(e){var t=e.order,a=t.price,n=r.a.useState(null),c=Object(o.a)(n,2),i=c[0],l=c[1],u=function(){var n=Object(A.a)(V.a.mark((function n(){var r,c;return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://cors-anywhere.herokuapp.com/http://api-factory.simbirsoft1.com/api/db/order",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b"},body:JSON.stringify({cityId:{id:t.city.id,name:t.city.name},pointId:{id:t.point.id,name:t.point.name},carId:{id:t.selectedCar.id},color:t.colorFilter.name,dateFrom:t.dateStart.timespan,dateTo:t.dateEnd.timespan,rateId:{id:t.rate.rateId},price:a,isFullTank:t.additionals[0].isActive,isNeedChildChair:t.additionals[1].isActive,isRightWheel:t.additionals[2].isActive})});case 2:return r=n.sent,e.resetFields(),e.resetInfoItems(),n.next=7,r.json();case 7:c=n.sent,l(c.data.id);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),m=function(){var t=Object(A.a)(V.a.mark((function t(a){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,u();case 3:e.setNextStep();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return null===i||void 0===i?r.a.createElement("div",{className:"modal visible"},r.a.createElement("div",{className:"confirm-order"},r.a.createElement("h2",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"button",onClick:function(e){return m(e)}},r.a.createElement("span",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c")),r.a.createElement("button",{className:"button red",onClick:function(t){return function(t){t.preventDefault(),e.setPrevStep()}(t)}},r.a.createElement("span",null,"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f"))))):r.a.createElement(s.a,{to:"/order/"+i})}),ae=function(e,t){var a=Math.abs(K()(e).diff(K()(t),"minutes")),n=Math.floor(a/60),r=a%60;return{days:Math.floor(n/24),hours:n%24,minutes:r}},ne=function(e,t,a,n,r){var c=n;return c+="\u043c\u0438\u043d"===e?(60*(24*a.days+a.hours)+a.minutes)*t:0===a.days?t:0===a.hours&&0===a.minutes?a.days*t:(a.days+1)*t,r.forEach((function(e){e.isActive&&(c+=e.price)})),c},re=function(e){var t={addInfoItem:e.addInfoItem,removeInfoItem:e.removeInfoItem,setField:e.setField,fieldValues:e.fieldValues,setOrderPrice:e.setOrderPrice,orderPrice:e.orderPrice,getDateDiff:ae,getOrderPrice:ne},a=e.orderId;return function(n){switch(n){case 1:return r.a.createElement(W,{props:t});case 2:return r.a.createElement(q,{props:t});case 3:return r.a.createElement(Z,{props:t});case 4:return r.a.createElement(ee,{props:t,orderId:a});case 5:return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,{props:t,orderId:a}),r.a.createElement(te,{setNextStep:e.setNextStep,setPrevStep:e.setPrevStep,order:e.fieldValues,price:e.orderPrice,resetFields:e.resetFields,resetInfoItems:e.resetInfoItems}));case 6:return r.a.createElement(ee,{props:t,orderId:a});default:return r.a.createElement(W,{props:t})}}(e.currentStep)},ce=a(24),ie=(a(68),{setNextStep:function(){return{type:"MOVE_TO_NEXT_STEP"}},setPrevStep:function(){return{type:"MOVE_TO_PREV_STEP"}},setStep:function(e){return{type:"MOVE_TO_STEP",payload:e}},addInfoItem:function(e,t){return{type:"ADD_INFO_ITEM",payload:{title:e,value:t}}},removeInfoItem:function(e){return{type:"REMOVE_INFO_ITEM",payload:e}},setField:function(e,t){return{type:"SET_FIELD",payload:{field:e,value:t}}},resetFields:function(){return{type:"RESET_FIELDS"}},resetInfoItems:function(){return{type:"RESET_INFO_ITEMS"}},setOrderPrice:function(e){return{type:"SET_ORDER_PRICE",payload:e}}}),le=Object(ce.b)((function(e){return{currentStep:e.steps.currentStep,filledSteps:e.steps.filledSteps,fieldValues:e.steps.fieldValues,infoItems:e.orderInfo.infoItems,orderPrice:e.orderInfo.orderPrice}}),ie)((function(e){var t=e.match.params.id,a=void 0===t?e.currentStep:6;return r.a.createElement("div",{className:"order-page"},r.a.createElement(x,null),r.a.createElement(C,{currentStep:a,setStep:e.setStep,filledSteps:e.filledSteps,orderId:t}),r.a.createElement("div",{className:"steps-body"},r.a.createElement(re,{currentStep:a,setPrevStep:e.setPrevStep,setNextStep:e.setNextStep,addInfoItem:e.addInfoItem,removeInfoItem:e.removeInfoItem,setField:e.setField,fieldValues:e.fieldValues,setOrderPrice:e.setOrderPrice,orderPrice:e.orderPrice,resetFields:e.resetFields,resetInfoItems:e.resetInfoItems,orderId:t}),r.a.createElement(T,{currentStep:a,setNextStep:e.setNextStep,setStep:e.setStep,infoItems:e.infoItems,filledSteps:e.filledSteps,resetFields:e.resetFields,resetInfoItems:e.resetInfoItems,orderPrice:e.orderPrice})))})),se=a(17),oe={currentStep:1,filledSteps:[4,5,6],fieldValues:{city:{id:null,name:""},point:{id:null,name:""},modelFilter:0,selectedCar:{id:null,model:null,number:null,colors:null,imgUrl:null,tank:null},colorFilter:{id:0,name:""},dateStart:{formatted:null,timespan:0},dateEnd:{formatted:null,timespan:0},rate:{id:0,rateId:"",price:null,rateName:""},additionals:[{title:"\u041f\u043e\u043b\u043d\u044b\u0439 \u0431\u0430\u043a",systemName:"isFullTank",isActive:!1,price:200,unit:"\u20bd"},{title:"\u0414\u0435\u0442\u0441\u043a\u043e\u0435 \u043a\u0440\u0435\u0441\u043b\u043e",systemName:"isNeedChildChair",isActive:!1,price:200,unit:"\u20bd"},{title:"\u041f\u0440\u0430\u0432\u044b\u0439 \u0440\u0443\u043b\u044c",systemName:"isRightWheel",isActive:!1,price:1600,unit:"\u20bd"}]}},ue=function(e,t){switch(e){case 1:return""!==t.city.name&&""!==t.point.name;case 2:return null!==t.selectedCar.id;case 3:return null!==t.dateStart.formatted&&null!==t.dateEnd.formatted;default:return!0}},me={infoItems:[],orderPrice:{min:null,max:null,final:null}},de=Object(se.b)({steps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVE_TO_NEXT_STEP":var a=e.currentStep+1;return Object(z.a)(Object(z.a)({},e),{},{currentStep:a});case"MOVE_TO_STEP":return Object(z.a)(Object(z.a)({},e),{},{currentStep:t.payload});case"MOVE_TO_PREV_STEP":var n=e.currentStep-1;return Object(z.a)(Object(z.a)({},e),{},{currentStep:n});case"SET_FIELD":var r=Object(z.a)({},e.fieldValues),c=Object(J.a)(e.filledSteps),i=t.payload.field;r[i]=t.payload.value;var l=c.indexOf(e.currentStep);return!0===ue(e.currentStep,r)&&-1===l&&c.push(e.currentStep),Object(z.a)(Object(z.a)({},e),{},{fieldValues:r,filledSteps:c});case"RESET_FIELDS":return Object(z.a)(Object(z.a)({},e),{},{fieldValues:Object(z.a)({},oe.fieldValues),filledSteps:Object(J.a)(oe.filledSteps)});default:return e}},orderInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INFO_ITEM":var a=Object(J.a)(e.infoItems),n=a.findIndex((function(e){return e.title===t.payload.title}));return-1!==n?a[n].value=t.payload.value:a.push(t.payload),Object(z.a)(Object(z.a)({},e),{},{infoItems:a});case"REMOVE_INFO_ITEM":var r=Object(J.a)(e.infoItems),c=r.findIndex((function(e){return e.title===t.payload}));return-1!==c&&r.splice(c,1),Object(z.a)(Object(z.a)({},e),{},{infoItems:r});case"SET_ORDER_PRICE":return Object(z.a)(Object(z.a)({},e),{},{orderPrice:t.payload});case"RESET_INFO_ITEMS":return Object(z.a)(Object(z.a)({},e),{},{infoItems:Object(J.a)(me.infoItems),orderPrice:Object(z.a)({},me.orderPrice)});default:return e}}}),pe=(a(69),Object(se.c)(de)),fe=function(){return r.a.createElement("div",{className:"main-body"},r.a.createElement(l.a,null,r.a.createElement(ce.a,{store:pe},r.a.createElement(E,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:w}),r.a.createElement(s.b,{path:"/order",exact:!0,component:le}),r.a.createElement(s.b,{path:"/order/:id",exact:!0,component:le})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[38,1,2]]]);
//# sourceMappingURL=main.4c312897.chunk.js.map